{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from \"lodash.throttle\";\n\nconst FORM_KEY = \"feedback-form-state\";\n\nconst formEl = document.querySelector(\".feedback-form\");\n\nlet settingsObj = initializeForm(formEl);\n\nformEl.addEventListener(\"input\", throttle(onInput, 500));\nformEl.addEventListener(\"submit\", onSubmit);\n\nfunction onInput(event) {\n  if (event.target.nodeName === \"INPUT\") {\n    settingsObj.email = event.target.value;\n  }\n  if (event.target.nodeName === \"TEXTAREA\") {\n    settingsObj.message = event.target.value;\n  }\n  localStorage.setItem(FORM_KEY, JSON.stringify(settingsObj));\n}\n\nfunction onSubmit(event) {\n  event.preventDefault();\n  if (!settingsObj.email || !settingsObj.message) {\n    alert(\"Fill in every field, please.\");\n    return;\n  }\n  console.log(settingsObj);\n  console.log(`EMAIL: ${settingsObj.email}\\nMESSAGE: ${settingsObj.message}`);\n  localStorage.removeItem(FORM_KEY);\n  settingsObj = initializeForm(event.currentTarget);\n}\n\nfunction initializeForm(formElement, key = FORM_KEY) {\n  const settingsObj = JSON.parse(localStorage.getItem(key)) ?? {\n    email: \"\",\n    message: \"\",\n  };\n\n  formElement.elements.email.value = settingsObj.email;\n  formElement.elements.message.value = settingsObj.message;\n\n  return settingsObj;\n}\n"],"names":["FORM_KEY","formEl","settingsObj","initializeForm","throttle","onInput","onSubmit","event","formElement","key"],"mappings":"wIAEA,MAAMA,EAAW,sBAEXC,EAAS,SAAS,cAAc,gBAAgB,EAEtD,IAAIC,EAAcC,EAAeF,CAAM,EAEvCA,EAAO,iBAAiB,QAASG,EAASC,EAAS,GAAG,CAAC,EACvDJ,EAAO,iBAAiB,SAAUK,CAAQ,EAE1C,SAASD,EAAQE,EAAO,CAClBA,EAAM,OAAO,WAAa,UAC5BL,EAAY,MAAQK,EAAM,OAAO,OAE/BA,EAAM,OAAO,WAAa,aAC5BL,EAAY,QAAUK,EAAM,OAAO,OAErC,aAAa,QAAQP,EAAU,KAAK,UAAUE,CAAW,CAAC,CAC5D,CAEA,SAASI,EAASC,EAAO,CAEvB,GADAA,EAAM,eAAc,EAChB,CAACL,EAAY,OAAS,CAACA,EAAY,QAAS,CAC9C,MAAM,8BAA8B,EACpC,MACD,CACD,QAAQ,IAAIA,CAAW,EACvB,QAAQ,IAAI,UAAUA,EAAY;AAAA,WAAmBA,EAAY,SAAS,EAC1E,aAAa,WAAWF,CAAQ,EAChCE,EAAcC,EAAeI,EAAM,aAAa,CAClD,CAEA,SAASJ,EAAeK,EAAaC,EAAMT,EAAU,CACnD,MAAME,EAAc,KAAK,MAAM,aAAa,QAAQO,CAAG,CAAC,GAAK,CAC3D,MAAO,GACP,QAAS,EACb,EAEE,OAAAD,EAAY,SAAS,MAAM,MAAQN,EAAY,MAC/CM,EAAY,SAAS,QAAQ,MAAQN,EAAY,QAE1CA,CACT"}